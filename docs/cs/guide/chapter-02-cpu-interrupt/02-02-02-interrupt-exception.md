---
tags:
  - CPU
  - IDT
  - IRQ
  - balanced
  - exception
  - intermediate
  - interrupt
  - medium-read
  - μ‹μ¤ν…ν”„λ΅κ·Έλλ°
difficulty: INTERMEDIATE
learning_time: "4-6μ‹κ°„"
main_topic: "μ‹μ¤ν… ν”„λ΅κ·Έλλ°"
priority_score: 4
---

# 2.2.2: μΈν„°λ½νΈμ™€ μμ™Έ

## π― CPUμ κΈ΄κΈ‰ νΈμ¶ μ‹μ¤ν…

μΈν„°λ½νΈμ™€ μμ™Έλ” ν„λ€ μ»΄ν“¨ν…μ μ‹¬μ¥μ΄λΌ ν•  μ μμµλ‹λ‹¤. ν‚¤λ³΄λ“ μ…λ ¥λ¶€ν„° λ„¤νΈμ›ν¬ ν†µμ‹ , λ©”λ¨λ¦¬ λ³΄νΈκΉμ§€ λ¨λ“  κ²ƒμ΄ μ΄ λ©”μ»¤λ‹μ¦μ„ ν†µν•΄ μ΄λ£¨μ–΄μ§‘λ‹λ‹¤.

2020λ…„ ν΄λΌμ°λ“ν”λ μ–΄μ 27λ¶„ μ„λΉ„μ¤ λ§λΉ„ μ‚¬κ±΄μ²λΌ, μΈν„°λ½νΈ μ‹μ¤ν…μ μ¥μ• λ” μ „ μ„Έκ³„ μΈν„°λ„· μ„λΉ„μ¤λ¥Ό μ •μ§€μ‹ν‚¬ μ μμ„ λ§νΌ μ¤‘μ”ν•©λ‹λ‹¤.

## π“ ν•™μµ λ΅λ“λ§µ

μ΄ μ„Ήμ…μ€ 4κ°μ μ „λ¬Έν™”λ λ¬Έμ„λ΅ κµ¬μ„±λμ–΄ μμµλ‹λ‹¤:

### 1οΈβƒ£ [μΈν„°λ½νΈ κΈ°μ΄μ™€ κ°λ…](./02-02-01-interrupt-basics.md)

- μΈν„°λ½νΈκ°€ μ™ ν•„μ”ν•κ°€? (ν΄λ§ vs μΈν„°λ½νΈ)
- μΈν„°λ½νΈ λ¶„λ¥: ν•λ“μ›¨μ–΄ vs μ†ν”„νΈμ›¨μ–΄
- IDT(μΈν„°λ½νΈ λ²΅ν„° ν…μ΄λΈ”) - CPUμ μ „ν™”λ²νΈλ¶€
- μ‹¤μ  μ‚¬λ΅€: κ²μ„μ—μ„ λ§μ°μ¤ μΈν„°λ½νΈ μµμ ν™”

### 2οΈβƒ£ [μΈν„°λ½νΈ μ²λ¦¬ κ³Όμ •κ³Ό μμ™Έ](./02-02-03-interrupt-processing.md)

- 6λ‹¨κ³„ μΈν„°λ½νΈ μ²λ¦¬ κ³Όμ • (IDT β†’ ν•Έλ“¤λ¬ β†’ IRET)
- μΈν„°λ½νΈ ν•Έλ“¤λ¬ μ‘μ„± μ›μΉ™κ³Ό μ‹¤μ  κµ¬ν„
- μμ™Έ μ²λ¦¬: Fault, Trap, Abortμ μ°¨μ΄
- ν™”μ„± νƒμ‚¬μ„ μ„ κµ¬ν• μμ™Έ μ²λ¦¬ μ‚¬λ΅€

### 3οΈβƒ£ [μΈν„°λ½νΈ μ»¨νΈλ΅¤λ¬μ™€ μµμ ν™”](./02-02-04-interrupt-controllers.md)

- PICμ—μ„ APICλ΅μ μ§„ν™” (8κ° β†’ 40μ–µκ° μΈν„°λ½νΈ)
- μΈν„°λ½νΈ κ²°ν•©(Coalescing)μΌλ΅ μ„±λ¥ ν–¥μƒ
- CPU μΉν™”λ„(Affinity) μ„¤μ •μ„ ν†µν• λ΅λ“ λ°Έλ°μ‹±
- κµ¬κΈ€ λ°μ΄ν„°μ„Όν„°μ μ „λ ¥ μ μ•½ κΈ°λ²•

### 4οΈβƒ£ [μ†ν”„νΈ μΈν„°λ½νΈμ™€ μ‹¤μ‹κ°„ μ²λ¦¬](./02-02-05-software-interrupts.md)

- Softirqμ™€ Tasklet - μΈν„°λ½νΈμ λ’·μ •λ¦¬
- ksoftirqd λ°λ¬μ μ—­ν• κ³Ό μ„±λ¥ μ„ν©νΈ
- μ‹¤μ‹κ°„ μ‹μ¤ν…μ λ§μ΄ν¬λ΅μ΄ λ‹¨μ„ μ”κµ¬μ‚¬ν•­
- μΈν„°λ½νΈ λ””λ²„κΉ…κ³Ό μ¤ν†° κ°μ§€ κΈ°λ²•

## π― ν•µμ‹¬ κ°λ… λΉ„κµν‘

| κµ¬λ¶„ | ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ | μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ | μ‹¤μ‹κ°„ μΈν„°λ½νΈ |
|------|------------------|-------------------|-----------------|
|**λ°μƒ μ›μΈ**| μ™Έλ¶€ μ¥μΉ (ν‚¤λ³΄λ“, λ„¤νΈμ›ν¬) | CPU λ‚΄λ¶€ (μμ™Έ, μ‹μ¤ν… μ½) | μ‹κ°„ κΈ°λ° (νƒ€μ΄λ¨Έ) |
|**μ°μ„ μμ„**| λ†’μ | μ¤‘κ°„ | μµκ³  |
|**μ§€μ—° μ‹κ°„**| λ§μ΄ν¬λ΅μ΄ | λ‚λ…Έμ΄ | μ„λΈ λ§μ΄ν¬λ΅μ΄ |
|**μμ‹**| IRQ1 (ν‚¤λ³΄λ“) | INT 0x80 (μ‹μ¤ν… μ½) | APIC νƒ€μ΄λ¨Έ |

## π€ μ‹¤μ „ ν™μ© μ‹λ‚λ¦¬μ¤

### μ‹λ‚λ¦¬μ¤ 1: κ²μ„ μ„λ²„ μµμ ν™”

**λ¬Έμ **: 60 FPS κ²μ„μ—μ„ μΈν„°λ½νΈ μ§€μ—°μΌλ΅ ν”„λ μ„ λ“λ΅­ λ°μƒ
**ν•΄κ²°**: μΈν„°λ½νΈ μΉν™”λ„ μ„¤μ •μΌλ΅ CPU λ¶„μ‚°, μ„±λ¥ 2λ°° ν–¥μƒ

### μ‹λ‚λ¦¬μ¤ 2: λ°μ΄ν„°μ„Όν„° μ „λ ¥ μ μ•½

**λ¬Έμ **: μ΄λ‹Ή μμ΅°κ° μΈν„°λ½νΈλ΅ μΈν• λ†’μ€ μ „λ ¥ μ†λΉ„
**ν•΄κ²°**: μΈν„°λ½νΈ κ²°ν•©μΌλ΅ CPU κΉ¨μ°κΈ° νμ 1000λ°° κ°μ†

### μ‹λ‚λ¦¬μ¤ 3: μμ¨μ£Όν–‰ μ•μ „ μ‹μ¤ν…

**λ¬Έμ **: λΈλ μ΄ν¬ μΈν„°λ½νΈ μ§€μ—°μ΄ μƒλ…κ³Ό μ§κ²°
**ν•΄κ²°**: μ‹¤μ‹κ°„ μΈν„°λ½νΈ μ°μ„ μμ„μ™€ μ „μ© CPU ν• λ‹Ή

## π”— μ—°κ΄€ ν•™μµ

### μ„ ν–‰ ν•™μµ

- [CPU μ•„ν‚¤ν…μ²](./02-01-01-cpu-architecture.md) - Protection Ringκ³Ό μ‹¤ν–‰ λ¨λ“
- [λ©”λ¨λ¦¬ κ΄€λ¦¬](../chapter-03-memory-system/index.md) - κ°€μƒ λ©”λ¨λ¦¬μ™€ νμ΄μ§€ ν΄νΈ

### ν›„μ† ν•™μµ  

- [μ»¨ν…μ¤νΈ μ¤μ„μΉ­](./02-03-03-context-switching.md) - μΈν„°λ½νΈ κΈ°λ° ν”„λ΅μ„Έμ¤ μ „ν™
- [νμΌ μ‹μ¤ν…](../chapter-06-file-io/index.md) - I/O μΈν„°λ½νΈμ™€ νμΌ μ²λ¦¬

### μ‹¤λ¬΄ μ μ©

- [λ„¤νΈμ›ν¬ ν”„λ΅κ·Έλλ°](../chapter-07-network-programming/index.md) - λ„¤νΈμ›ν¬ μΈν„°λ½νΈ μµμ ν™”
- [μ‹μ¤ν… μ„¤κ³„](../chapter-16-distributed-system-patterns/index.md) - λ€κ·λ¨ μ‹μ¤ν…μ—μ„μ μΈν„°λ½νΈ κ΄€λ¦¬

## π― ν•µμ‹¬ μ§λ¬Έκ³Ό λ‹µλ³€

### Q: ν‚¤λ³΄λ“λ¥Ό λ„λ¥΄λ©΄ CPUλ” μ–΄λ–»κ² μ¦‰μ‹ λ°μ‘ν•λ”κ°€?

**A**: IRQ1 μΈν„°λ½νΈκ°€ λ°μƒν•μ—¬ CPUκ°€ ν„μ¬ μ‘μ—…μ„ μ¤‘λ‹¨ν•κ³  ν‚¤λ³΄λ“ ν•Έλ“¤λ¬λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤. λ‹¨ 6λ§μ΄ν¬λ΅μ΄ λ§μ— μ™„λ£λ©λ‹λ‹¤.

### Q: 0μΌλ΅ λ‚λ„λ©΄ μ™ ν”„λ΅κ·Έλ¨μ΄ μ£½λ”κ°€?

**A**: CPUκ°€ Division by Zero μμ™Έ(λ²΅ν„° 0)λ¥Ό λ°μƒμ‹ν‚¤κ³ , OSκ°€ SIGFPE μ‹ νΈλ¥Ό ν”„λ΅μ„Έμ¤μ— μ „μ†΅ν•μ—¬ μΆ…λ£μ‹ν‚µλ‹λ‹¤.

### Q: ν•λ“μ›¨μ–΄ μΈν„°λ½νΈμ™€ μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈμ μ°¨μ΄λ”?

**A**: ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ” μ™Έλ¶€ μ¥μΉμ—μ„ λ°μƒ(λΉ„λ™κΈ°), μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈλ” CPU λ‚΄λ¶€μ—μ„ λ°μƒ(λ™κΈ°)ν•©λ‹λ‹¤.

### Q: μ‹¤μ‹κ°„ μ‹μ¤ν…μ—μ„ μΈν„°λ½νΈ μ§€μ—°μ„ μµμ†ν™”ν•λ” λ°©λ²•μ€?

**A**: μ „μ© CPU ν• λ‹Ή, μ‹¤μ‹κ°„ μ°μ„ μμ„ μ„¤μ •, μΈν„°λ½νΈ ν•Έλ“¤λ¬ μµμ ν™”, κ·Έλ¦¬κ³  ν•λ“μ›¨μ–΄ λ λ²¨ νλ‹μ„ μ΅°ν•©ν•©λ‹λ‹¤.

## π› οΈ μ‹¤λ¬΄ λ…λ Ήμ–΄

```bash
# 1. μΈν„°λ½νΈ ν„ν™© λ¨λ‹ν„°λ§
watch -d -n 1 'cat /proc/interrupts'

# 2. μΈν„°λ½νΈ μΉν™”λ„ μ„¤μ •
echo 2 > /proc/irq/24/smp_affinity  # NICλ¥Ό CPU1μ— ν• λ‹Ή

# 3. μ†ν”„νΈ μΈν„°λ½νΈ μƒνƒ ν™•μΈ
cat /proc/softirqs

# 4. λ„¤νΈμ›ν¬ μΈν„°λ½νΈ κ²°ν•© νλ‹
ethtool -C eth0 rx-usecs 100
```text

## π“ μ„±λ¥ λ²¤μΉλ§ν¬

### μΈν„°λ½νΈ μµμ ν™” μ „ν›„ λΉ„κµ

```text
Before:
- μΈν„°λ½νΈ/μ΄: 1,000,000κ°
- CPU μ‚¬μ©λ¥ : 95%
- μ „λ ¥ μ†λΉ„: 95W

After:
- μΈν„°λ½νΈ/μ΄: 1,000κ° (1000λ°° κ°μ†)
- CPU μ‚¬μ©λ¥ : 45%
- μ „λ ¥ μ†λΉ„: 45W (50% μ μ•½)
```

## π” λ””λ²„κΉ… μ²΄ν¬λ¦¬μ¤νΈ

- [ ] `/proc/interrupts`μ—μ„ μΈν„°λ½νΈ λ¶„μ‚° μƒνƒ ν™•μΈ
- [ ] `mpstat -P ALL`λ΅ CPUλ³„ μΈν„°λ½νΈ λ¶€ν• ν™•μΈ  
- [ ] `ethtool -S`λ΅ λ„¤νΈμ›ν¬ μΈν„°λ½νΈ ν†µκ³„ λ¶„μ„
- [ ] `perf record -e irq:`λ΅ μΈν„°λ½νΈ μ„±λ¥ ν”„λ΅νμΌλ§
- [ ] μΈν„°λ½νΈ μ¤ν†° κ°μ§€ μ¤ν¬λ¦½νΈ μ‹¤ν–‰

---

**μ‹μ‘ν•κΈ°**: [μΈν„°λ½νΈ κΈ°μ΄μ™€ κ°λ…](./02-02-01-interrupt-basics.md)μ—μ„ μΈν„°λ½νΈμ ν•„μ”μ„±κ³Ό κΈ°λ³Έ λ™μ‘μ„ ν•™μµν•©λ‹λ‹¤.

## π“ κ΄€λ ¨ λ¬Έμ„

### π“– ν„μ¬ λ¬Έμ„ μ •λ³΄

-**λ‚μ΄λ„**: INTERMEDIATE
-**μ£Όμ **: μ‹μ¤ν… ν”„λ΅κ·Έλλ°
-**μμƒ μ‹κ°„**: 4-6μ‹κ°„

### π― ν•™μµ κ²½λ΅

- [π“ INTERMEDIATE λ λ²¨ μ „μ²΄ λ³΄κΈ°](../learning-paths/intermediate/)
- [π  λ©”μΈ ν•™μµ κ²½λ΅](../learning-paths/)
- [π“‹ μ „μ²΄ κ°€μ΄λ“ λ©λ΅](../README.md)

### π“‚ κ°™μ€ μ±•ν„° (chapter-02-cpu-interrupt)

- [Chapter 2-1-1: CPU μ•„ν‚¤ν…μ²μ™€ λ…λ Ήμ–΄ μ‹¤ν–‰ κ°μ”](./02-01-01-cpu-architecture.md)
- [Chapter 2-1-2: CPU κΈ°λ³Έ κµ¬μ΅°μ™€ λ…λ Ήμ–΄ μ‹¤ν–‰](./02-01-02-cpu-fundamentals.md)
- [Chapter 2-1-3: λ¶„κΈ° μμΈ΅κ³Ό Out-of-Order μ‹¤ν–‰](./02-01-03-prediction-ooo.md)
- [Chapter 2-1-4: CPU μΊμ‹μ™€ SIMD λ²΅ν„°ν™”](./02-01-04-cache-simd.md)
- [Chapter 2-1-5: μ„±λ¥ μΈ΅μ •κ³Ό μ‹¤μ „ μµμ ν™”](./02-01-05-performance-optimization.md)

### π·οΈ κ΄€λ ¨ ν‚¤μ›λ“

`interrupt`, `exception`, `CPU`, `IRQ`, `IDT`

### β­οΈ λ‹¤μ λ‹¨κ³„ κ°€μ΄λ“

- μ‹¤λ¬΄ μ μ©μ„ μ—Όλ‘μ— λ‘κ³  ν”„λ΅μ νΈμ— μ μ©ν•΄λ³΄μ„Έμ”
- κ΄€λ ¨ λ„κµ¬λ“¤μ„ μ§μ ‘ μ‚¬μ©ν•΄λ³΄λ” κ²ƒμ΄ μ¤‘μ”ν•©λ‹λ‹¤
